{% extends 'users/base.html' %}
{% block title %}{{ user.get_full_name }} (@{{ user.username }}) &#8226; {{ block.super }} photos and videos{% endblock %}

{% block account_content %}
    <div class="profile-container">
        <section class="profile-user-card">
            <div class="flex">
                <section class="profile-picture">
                    {% if user.profile.picture %}
                        <img src="{{ user.profile.picture.url }}" alt="{{ user.username }}_profile_picture">
                    {% else %}
                        <span class="flex flex-align-center flex-justify-center profile-default">
                            {{ user.first_name|slice:'1' }}{{ user.last_name|slice:':1' }}
                        </span>
                    {% endif %}
                </section>
                <section class="profile-info">
                    <h1 class="profile-username mb-15">@{{ user.username }}</h1>
                    <section class="profile-numbers flex mb-20">
                        <span>{{ user.total_posts }} Post{{ user.total_posts | pluralize }}</span>
                        <span>0 Followers</span>
                        <span>0 Following</span>
                    </section>
                    <h4 class="mb-10" style="font-weight: 500;">{{ user.get_full_name }}</h4>
                    {% if user.profile.biography %}
                        <p class="profile-user-biography mb-10">{{ user.profile.biography }}</p>
                    {% endif %}
                    {% if user.profile.link %}
                        <a class="flex flex-align-center link-purple" href="{{ user.profile.link }}" target="_blank">
                            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24">
                                <path d="M9.199 13.599c0.992 1.327 2.43 2.126 3.948 2.345s3.123-0.142 4.45-1.134c0.239-0.179 0.465-0.375 0.655-0.568l2.995-2.995c1.163-1.204 1.722-2.751 1.696-4.285s-0.639-3.061-1.831-4.211c-1.172-1.132-2.688-1.692-4.199-1.683-1.492 0.008-2.984 0.571-4.137 1.683l-1.731 1.721c-0.392 0.389-0.394 1.023-0.004 1.414s1.023 0.394 1.414 0.004l1.709-1.699c0.77-0.742 1.763-1.117 2.76-1.123 1.009-0.006 2.016 0.367 2.798 1.122 0.795 0.768 1.203 1.783 1.221 2.808s-0.355 2.054-1.11 2.836l-3.005 3.005c-0.114 0.116-0.263 0.247-0.428 0.37-0.885 0.662-1.952 0.902-2.967 0.756s-1.971-0.678-2.632-1.563c-0.331-0.442-0.957-0.533-1.4-0.202s-0.533 0.957-0.202 1.4zM14.801 10.401c-0.992-1.327-2.43-2.126-3.948-2.345s-3.124 0.142-4.451 1.134c-0.239 0.179-0.464 0.375-0.655 0.568l-2.995 2.995c-1.163 1.204-1.722 2.751-1.696 4.285s0.639 3.061 1.831 4.211c1.172 1.132 2.688 1.692 4.199 1.683 1.492-0.008 2.984-0.571 4.137-1.683l1.723-1.723c0.391-0.391 0.391-1.024 0-1.414s-1.024-0.391-1.414 0l-1.696 1.698c-0.77 0.742-1.763 1.117-2.76 1.123-1.009 0.006-2.016-0.367-2.798-1.122-0.795-0.768-1.203-1.783-1.221-2.808s0.355-2.054 1.11-2.836l3.005-3.005c0.114-0.116 0.263-0.247 0.428-0.37 0.885-0.662 1.952-0.902 2.967-0.756s1.971 0.678 2.632 1.563c0.331 0.442 0.957 0.533 1.4 0.202s0.533-0.957 0.202-1.4z"></path>
                            </svg>
                            <span style="margin-left: 10px;">{{ user.profile.link }}</span>
                        </a>
                    {% endif %}
                </section>
            </div>
            <div>
                {% if user == request.user and request.user.is_authenticated %}
                    <a class="btn btn-small btn-profile" href="{% url 'account:edit-profile' %}">Edit profile</a>
                {% else %}
                    <form action="" method="post">
                        <button class="btn btn-small btn-profile">Follow</button>
                    </form>
                {% endif %}
            </div>
        </section>
        <section class="profile-options flex flex-justify-center">
            <div class="profile-link-group flex flex-justify-between">
                {% url 'account:profile' username=user.username as profile%}
                <a class="profile-link flex flex-align-center {% if request.path == profile %}profile-link-active{% endif %}" href="{{ profile }}">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-grid"><rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect></svg>
                    <span style="margin-left: 10px;">Posts</span>
                </a>
                {% if request.user == user %}
                    {% url 'posts:bookmarks' username=user.username as bookmarks %}
                    <a class="profile-link flex flex-align-center {% if request.path == bookmarks %}profile-link-active{% endif %}" href="{{ bookmarks }}">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-bookmark"><path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path></svg>
                        <span style="margin-left: 10px;">Saved</span>
                    </a>
                {% endif %}
                <a class="profile-link flex flex-align-center" href="">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg>
                    <span style="margin-left: 10px;">Tagged</span>
                </a>
            </div>
        </section>
        <section class="profile-content">
            {% if request.path == profile %}
                {% if posts %}
                    <div class="profile-grid grid grid-gap-14 grid-col-3 flex flex-justify-center flex-align-center">
                        {% for post in posts %}
                        <a class="profile-grid-element overlay-image" href="{% url 'posts:detail' url=post.url %}">
                            <img src="{{ post.thumbnail.url }}" alt="post-thumbnail">
                            <div id="overlay" class="overlay flex-align-center flex-justify-center">
                                <section class="overlay-icons flex flex-algin-center flex-justify-between">
                                    <span class="flex flex-align-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-heart"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>
                                        <span style="margin-left: 5px;">{{ post.total_likes }}</span>
                                    </span>
                                    <span class="flex flex-align-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-message-circle"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path></svg>
                                        <span style="margin-left: 5px;">{{ post.total_comments }}</span>
                                    </span>
                                </section>
                            </div>
                        </a>
                        {% endfor %}
                    </div>
                {% else %}
                    <div class="flex flex-align-center flex-justify-center" style="height: 25vh;">
                        <div class="flex flex-column flex-align-center">
                            <svg xmlns="http://www.w3.org/2000/svg" width="42" height="42" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-image"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg>
                            <h2 class="mt-15">No posts yet</h2>
                        </div>
                    </div>
                {% endif %}
            {% else %}
                {% block profile_content %}{% endblock %}
            {% endif %}
        </section>
    </div>
{% endblock %}
{% block sidebar_right %}{% endblock %}